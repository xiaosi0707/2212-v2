(function(){"use strict";var t={5610:function(t,e,a){var s={};a.r(s),a.d(s,{formatDate:function(){return b}});var r=a(6369),l=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},o=[],i=a(1001),n={},d=(0,i.Z)(n,l,o,!1,null,null,null),c=d.exports,u=a(1908),p=a.n(u),m=a(7121),h=a.n(m);function b(t){const e=new Date(t),a=e.getFullYear(),s=(e.getMonth()+1+"").padStart(2,"0"),r=(e.getDate()+"").padStart(2,"0"),l=(e.getHours()+"").padStart(2,"0"),o=(e.getMinutes()+"").padStart(2,"0"),i=(e.getSeconds()+"").padStart(2,"0");return`${a}-${s}-${r} ${l}:${o}:${i}`}var g=a(4655);let f=null;const _=g.Z.create({baseURL:"http://43.138.15.137:7001/api/private/v1/",timeout:1e5});r["default"].prototype.$http=_,_.interceptors.request.use((function(t){return t.headers.Authorization=localStorage.getItem("token"),t}),(function(t){return Promise.reject(t)})),_.interceptors.response.use((function(t){let{data:e,meta:a}=t.data;switch(u.Message.closeAll(),a.status){case 200:u.Message.success(a.msg);break;case 201:u.Message.success(a.msg);break;case 204:u.Message.success(a.msg);break;case 400:u.Message.error(a.msg);break;case 401:u.Message.error(a.msg);break;case 403:u.Message.error(a.msg);break;case 404:u.Message.error(a.msg);break;case 422:u.Message.error(a.msg);break;case 500:u.Message.error(a.msg);break;default:u.Message.success(a.msg)}return t}),(function(t){return JSON.stringify(t).includes("timeout")?(f.close(),u.Message.error("服务器响应超时，请检查网络"),void f.close()):Promise.reject(t)}));var v=a(7740),y=function(){var t=this,e=t._self._c;return e("el-form",{ref:"loginForm",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"用户名",prop:"username"}},[e("el-input",{model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),e("el-form-item",{attrs:{label:"密码",prop:"password"}},[e("el-input",{model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),e("el-form-item",[e("el-button",{staticClass:"wyf-btn-login",attrs:{type:"primary"},on:{click:t.login}},[t._v("登陆")])],1)],1)},w=[],k={data(){return{form:{username:"admin",password:"123456"},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{login(){this.$refs.loginForm.validate((t=>{t&&this.$http.post("login",{username:this.form.username,password:this.form.password}).then((t=>{200===t.data.meta.status?(localStorage.setItem("token",t.data.data.token),this.$router.push("/main")):localStorage.removeItem("token")}))}))}}},x=k,C=(0,i.Z)(x,y,w,!1,null,"146cf1c2",null),$=C.exports,A=function(){var t=this,e=t._self._c;return e("el-container",[e("el-header",[t._v("Header")]),e("el-container",[e("el-aside",{attrs:{width:"200px"}},[e("el-col",{attrs:{span:24}},[e("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"unique-opened":"",router:"","default-active":"2","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"}},t._l(t.menusList,(function(a,s){return e("el-submenu",{attrs:{index:a.id+""}},[e("template",{slot:"title"},[e("i",{class:t.iconsList[s]}),e("span",[t._v(t._s(a.authName))])]),t._l(a.children,(function(a){return e("el-menu-item",{attrs:{index:a.path}},[t._v(t._s(a.authName))])}))],2)})),1)],1)],1),e("el-main",["/main"===t.$route.fullPath?e("h1",[t._v("welcome...")]):t._e(),e("router-view")],1)],1)],1)},S=[],R={data(){return{menusList:[],iconsList:["el-icon-user-solid","el-icon-s-tools","el-icon-s-goods","el-icon-money","el-icon-data-line"]}},created(){this.$http.get("menus").then((t=>{this.menusList=t.data.data}))}},D=R,V=(0,i.Z)(D,A,S,!1,null,null,null),P=V.exports,F=function(){var t=this,e=t._self._c;return e("div",[e("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),e("el-breadcrumb-item",[t._v("用户管理")]),e("el-breadcrumb-item",[t._v("用户列表")])],1),e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[e("Search",{on:{sendSearch:t.search}}),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("添加用户")])],1)]),e("div",{staticClass:"text item"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.usersData,border:""}},[e("el-table-column",{attrs:{type:"index",label:"id",width:"50"}}),e("el-table-column",{attrs:{prop:"username",label:"姓名",width:"180"}}),e("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),e("el-table-column",{attrs:{prop:"mobile",label:"电话"}}),e("el-table-column",{attrs:{prop:"role_name",label:"角色"}}),e("el-table-column",{attrs:{prop:"mg_state",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-switch",{on:{change:function(e){return t.updateState(a.row)}},model:{value:a.row.mg_state,callback:function(e){t.$set(a.row,"mg_state",e)},expression:"scope.row.mg_state"}})]}}])}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(e){return t.editOpen(a.row)}}}),e("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(e){return t.del(a.row.id)}}}),e("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(e){return t.openSetRole(a.row)}}})]}}])})],1)],1),e("Page",{attrs:{num:t.usersParams.pagenum,size:[2,4,6,8],total:t.usersListTotal},on:{sendSizeChange:t.handleSizeChange,sendCurrentChange:t.handleCurrentChange}})],1),e("Modal",{attrs:{title:"添加用户",sendModalShow:t.dialogFormVisible,labelWidth:t.formLabelWidth,formAttr:t.addUserForm},on:{"update:sendModalShow":function(e){t.dialogFormVisible=e},"update:send-modal-show":function(e){t.dialogFormVisible=e}}},[e("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("确 定")])],1),e("Modal",{attrs:{title:"编辑用户",sendModalShow:t.editDialogFormVisible,formAttr:t.editUserForm,isDisabledName:!0},on:{"update:sendModalShow":function(e){t.editDialogFormVisible=e},"update:send-modal-show":function(e){t.editDialogFormVisible=e}}},[e("el-button",{attrs:{type:"primary"},on:{click:t.edit}},[t._v("确 定")])],1),e("el-dialog",{attrs:{title:"分配角色",visible:t.setRoleDialogFormVisible},on:{"update:visible":function(e){t.setRoleDialogFormVisible=e}}},[e("el-form",[e("el-form-item",{attrs:{"label-width":t.formLabelWidth}},[t._v(" 当前用户名："+t._s(t.roleObj.username)+" ")]),e("el-form-item",{attrs:{"label-width":t.formLabelWidth}},[t._v(" 当前的角色："+t._s(t.roleObj.role_name)+" ")]),e("el-form-item",{attrs:{label:"新角色","label-width":t.formLabelWidth}},[e("p",[t._v("value的值是："+t._s(t.roleId))]),e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.roleId,callback:function(e){t.roleId=e},expression:"roleId"}},t._l(t.rolesList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.roleName,value:t.id}})})),1)],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.setRoleDialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.setNewRole}},[t._v("确 定")])],1)],1)],1)},L=[],M=function(){var t=this,e=t._self._c;return e("el-input",{staticStyle:{width:"32%","margin-right":"10px"},attrs:{placeholder:"请输入内容"},model:{value:t.searchVal,callback:function(e){t.searchVal=e},expression:"searchVal"}},[e("template",{slot:"append"},[e("i",{staticClass:"el-icon-search",on:{click:t.search}})])],2)},q=[],O={data(){return{searchVal:""}},methods:{search(){this.$emit("sendSearch",this.searchVal)}}},z=O,I=(0,i.Z)(z,M,q,!1,null,null,null),j=I.exports,G=function(){var t=this,e=t._self._c;return e("el-pagination",{attrs:{"current-page":t.num,"page-sizes":t.size,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.sizeChange,"current-change":t.currentChange}})},T=[],N={props:{num:{type:Number,default:1},size:{type:Array},total:{type:Number}},methods:{sizeChange(t){this.$emit("sendSizeChange",t)},currentChange(t){this.$emit("sendCurrentChange",t)}}},U=N,E=(0,i.Z)(U,G,T,!1,null,null,null),Z=E.exports,H=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.title,visible:t.sendModalShow,"before-close":t.changeModalHide},on:{"update:visible":function(e){t.sendModalShow=e}}},[e("el-form",[t.formAttr.hasOwnProperty("username")?e("el-form-item",{attrs:{label:"用户名","label-width":t.labelWidth}},[e("el-input",{attrs:{autocomplete:"off",disabled:t.isDisabledName},model:{value:t.formAttr.username,callback:function(e){t.$set(t.formAttr,"username",e)},expression:"formAttr.username"}})],1):t._e(),t.formAttr.hasOwnProperty("password")?e("el-form-item",{attrs:{label:"密码","label-width":t.labelWidth}},[e("el-input",{attrs:{autocomplete:"off",disabled:t.isDisabledPwd},model:{value:t.formAttr.password,callback:function(e){t.$set(t.formAttr,"password",e)},expression:"formAttr.password"}})],1):t._e(),t.formAttr.hasOwnProperty("email")?e("el-form-item",{attrs:{label:"邮箱","label-width":t.labelWidth}},[e("el-input",{attrs:{autocomplete:"off",disabled:t.isDisabledEmail},model:{value:t.formAttr.email,callback:function(e){t.$set(t.formAttr,"email",e)},expression:"formAttr.email"}})],1):t._e(),t.formAttr.hasOwnProperty("mobile")?e("el-form-item",{attrs:{label:"手机","label-width":t.labelWidth}},[e("el-input",{attrs:{autocomplete:"off",disabled:t.isDisabledMobile},model:{value:t.formAttr.mobile,callback:function(e){t.$set(t.formAttr,"mobile",e)},expression:"formAttr.mobile"}})],1):t._e()],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.changeModalHide}},[t._v("取 消")]),t._t("default")],2)],1)},W=[],B={props:{title:{type:String},sendModalShow:{type:Boolean,default:!1},labelWidth:{type:String,default:"100px"},formAttr:{type:Object,default:{}},isDisabledName:{type:Boolean,default:!1},isDisabledPwd:{type:Boolean,default:!1},isDisabledEmail:{type:Boolean,default:!1},isDisabledMobile:{type:Boolean,default:!1}},methods:{changeModalHide(){this.$emit("update:sendModalShow",!1)}}},K=B,J=(0,i.Z)(K,H,W,!1,null,null,null),Y=J.exports,Q={components:{Search:j,Page:Z,Modal:Y},data(){return{currentPage1:5,currentPage2:5,currentPage3:5,currentPage4:4,roleId:"",setRoleDialogFormVisible:!1,editUserForm:{},editingUserId:"",editDialogFormVisible:!1,usersData:[],dialogFormVisible:!1,formLabelWidth:"100px",addUserForm:{username:"",password:"",email:"",mobile:""},usersParams:{query:"",pagenum:1,pagesize:2},usersListTotal:0,rolesList:[],roleObj:{}}},created(){this.getUserData()},methods:{handleSizeChange(t){this.usersParams.pagesize=t,this.getUserData()},handleCurrentChange(t){this.usersParams.pagenum=t,this.getUserData()},updateState(t){this.$http.put(`users/${t.id}/state/${t.mg_state}`).then((t=>{}))},setNewRole(){this.$http.put(`users/${this.roleObj.id}/role`,{rid:this.roleId}).then((t=>{this.setRoleDialogFormVisible=!1}))},openSetRole(t){this.roleObj=t,this.setRoleDialogFormVisible=!0,this.$http.get("roles").then((t=>{this.rolesList=t.data.data}))},editOpen(t){this.editUserForm=t,this.editDialogFormVisible=!0},edit(){this.$http.put(`users/${this.editUserForm.id}`,this.editUserForm).then((t=>{this.editDialogFormVisible=!1,200===t.data.meta.status&&(this.$message.success(t.data.meta.msg),this.getUserData())}))},search(t){this.usersParams.query=t,this.$http.get("users",{params:this.usersParams}).then((t=>{let{users:e}=t.data.data;this.usersData=e}))},getUserData(){this.$http.get("users",{params:this.usersParams}).then((t=>{let{users:e,total:a}=t.data.data;this.usersListTotal=a,this.usersData=e}))},add(){this.dialogFormVisible=!1,this.$http.post("users",this.addUserForm).then((t=>{t&&this.getUserData()}))},del(t){this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$http.delete(`users/${t}`).then((t=>{t&&this.getUserData()}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))}}},X=Q,tt=(0,i.Z)(X,F,L,!1,null,null,null),et=tt.exports,at=function(){var t=this,e=t._self._c;return e("div",[e("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),e("el-breadcrumb-item",[t._v("权限管理")]),e("el-breadcrumb-item",[t._v("角色列表")])],1),e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[e("el-button",{attrs:{type:"primary"}},[t._v("添加角色")])],1)]),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.rolesList}},[e("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(a){return t._l(a.row.children,(function(a){return e("el-row",[e("el-col",{staticStyle:{"border-top":"1px solid #EBEEF5","border-radius":"0","padding-top":"10px"},attrs:{span:4}},[e("el-tag",{staticClass:"wyf-tag",attrs:{closable:""}},[t._v(t._s(a.authName))])],1),e("el-col",{attrs:{span:20}},t._l(a.children,(function(a){return e("el-row",[e("el-col",{staticStyle:{"border-top":"1px solid #EBEEF5","border-radius":"0","padding-top":"10px"},attrs:{span:8}},[e("el-tag",{staticClass:"wyf-tag",attrs:{type:"success",closable:""}},[t._v(t._s(a.authName))])],1),e("el-col",{staticStyle:{"border-top":"1px solid #EBEEF5","border-radius":"0","padding-top":"10px"},attrs:{span:16}},t._l(a.children,(function(a){return e("el-tag",{staticClass:"wyf-tag",attrs:{type:"warning",closable:""}},[t._v(t._s(a.authName))])})),1)],1)})),1)],1)}))}}])}),e("el-table-column",{attrs:{type:"index",label:"#",prop:"id"}}),e("el-table-column",{attrs:{label:"角色名称",prop:"roleName"}}),e("el-table-column",{attrs:{label:"描述",prop:"roleDesc"}}),e("el-table-column",{attrs:{label:"操作",prop:""},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"}}),e("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"}}),e("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(e){return t.openSetRights(a.row)}}})]}}])})],1)],1),e("el-dialog",{attrs:{title:"分配权限",visible:t.setRightsDialogFormVisible},on:{"update:visible":function(e){t.setRightsDialogFormVisible=e}}},[e("el-tree",{ref:"tree",attrs:{data:t.rightsList,"show-checkbox":"","node-key":"id","default-expand-all":"","default-checked-keys":t.defaultChekedKeys,props:t.defaultProps}}),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.setRightsDialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.setRightsHandle}},[t._v("确 定")])],1)],1)],1)},st=[],rt={data(){return{rolesList:[],setRightsDialogFormVisible:!1,rightsList:[],defaultProps:{children:"children",label:"authName"},defaultChekedKeys:[],roleObj:{}}},created(){this.getRolesList()},methods:{getRolesList(){this.$http.get("roles").then((t=>{this.rolesList=t.data.data}))},openSetRights(t){this.roleObj=t,this.setRightsDialogFormVisible=!0,this.defaultChekedKeys=[],this.$http.get("rights/tree").then((t=>{this.rightsList=t.data.data})),this.defaultRightsHandle(t)},defaultRightsHandle(t){t.children.map((t=>{t.children?this.defaultRightsHandle(t):this.defaultChekedKeys.push(t.id)}))},setRightsHandle(){const t=this.$refs.tree.getCheckedKeys().concat(this.$refs.tree.getHalfCheckedKeys()).join();this.$http.post(`roles/${this.roleObj.id}/rights`,{rids:t}).then((t=>{}))}}},lt=rt,ot=(0,i.Z)(lt,at,st,!1,null,null,null),it=ot.exports,nt=function(){var t=this,e=t._self._c;return e("div",[e("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),e("el-breadcrumb-item",[t._v("商品管理")]),e("el-breadcrumb-item",[t._v("商品列表")])],1),e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[e("Search",{on:{sendSearch:t.search}}),e("el-button",{attrs:{type:"primary"},on:{click:t.goGoodsAdd}},[t._v("添加商品")])],1)]),e("Page",{attrs:{num:t.goodsParams.pagenum,size:[2,4,8,16],total:t.goodsTotal},on:{sendSizeChange:t.handleSizeChange,sendCurrentChange:t.handleCurrentChange}})],1)],1)},dt=[],ct={components:{Search:j,Page:Z},data(){return{goodsParams:{query:"",pagenum:1,pagesize:2},goodsTotal:0}},created(){this.getGoodsData()},methods:{handleSizeChange(t){this.goodsParams.pagesize=t,this.getGoodsData()},handleCurrentChange(t){this.goodsParams.pagenum=t,this.getGoodsData()},goGoodsAdd(){this.$router.push("/add")},search(t){this.goodsParams.query=t,this.$http.get("goods",{params:this.goodsParams}).then((t=>{}))},getGoodsData(){this.$http.get("goods",{params:this.goodsParams}).then((t=>{let{goods:e,total:a}=t.data.data;this.goodsTotal=a}))}}},ut=ct,pt=(0,i.Z)(ut,nt,dt,!1,null,null,null),mt=pt.exports,ht=function(){var t=this,e=t._self._c;return e("div",[e("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),e("el-breadcrumb-item",[t._v("商品管理")]),e("el-breadcrumb-item",[t._v("商品添加")])],1),e("el-card",{staticClass:"box-card"},[e("el-alert",{attrs:{title:"添加商品信息",type:"info",center:"","show-icon":"",closable:!1}}),e("el-steps",{staticClass:"wyf-steps",attrs:{active:t.active,"finish-status":"success","align-center":""}},[e("el-step",{attrs:{title:"基本信息"}}),e("el-step",{attrs:{title:"商品参数"}}),e("el-step",{attrs:{title:"商品属性"}}),e("el-step",{attrs:{title:"商品图片"}}),e("el-step",{attrs:{title:"商品内容"}}),e("el-step",{attrs:{title:"完成"}})],1),e("el-tabs",{attrs:{"tab-position":t.tabPosition},on:{"tab-click":t.selectedTab}},[e("el-tab-pane",{attrs:{label:"基本信息"}},[e("el-form",{attrs:{"label-position":"top","label-width":"80px"}},[e("el-form-item",{attrs:{label:"商品名称"}},[e("el-input",{model:{value:t.addGoodsRequest.goods_name,callback:function(e){t.$set(t.addGoodsRequest,"goods_name",e)},expression:"addGoodsRequest.goods_name"}})],1),e("el-form-item",{attrs:{label:"商品价格"}},[e("el-input",{model:{value:t.addGoodsRequest.goods_price,callback:function(e){t.$set(t.addGoodsRequest,"goods_price",e)},expression:"addGoodsRequest.goods_price"}})],1),e("el-form-item",{attrs:{label:"商品重量"}},[e("el-input",{model:{value:t.addGoodsRequest.goods_weight,callback:function(e){t.$set(t.addGoodsRequest,"goods_weight",e)},expression:"addGoodsRequest.goods_weight"}})],1),e("el-form-item",{attrs:{label:"商品数量"}},[e("el-input",{model:{value:t.addGoodsRequest.goods_number,callback:function(e){t.$set(t.addGoodsRequest,"goods_number",e)},expression:"addGoodsRequest.goods_number"}})],1),e("el-form-item",{attrs:{label:"商品分类"}},[e("el-cascader",{attrs:{options:t.catList,props:t.defaultProps},on:{change:t.handleChange}})],1)],1)],1),e("el-tab-pane",{attrs:{label:"商品参数"}},[e("el-form",{attrs:{"label-position":"top","label-width":"80px"}},t._l(t.manyAttrs,(function(a){return e("el-form-item",{attrs:{label:a.attr_name}},[e("p",[t._v("当前选中的checkbox的值："+t._s(t.checkedList))]),e("el-checkbox-group",{model:{value:t.checkedList,callback:function(e){t.checkedList=e},expression:"checkedList"}},t._l(a.attr_vals.split(" "),(function(t){return e("el-checkbox",{attrs:{label:t,border:""}})})),1)],1)})),1)],1),e("el-tab-pane",{attrs:{label:"商品属性"}},[e("el-form",{attrs:{"label-position":"top","label-width":"80px"}},t._l(t.onlyAttrs,(function(a){return e("el-form-item",{attrs:{label:a.attr_name}},[e("el-input",{model:{value:a.attr_vals,callback:function(e){t.$set(a,"attr_vals",e)},expression:"item.attr_vals"}})],1)})),1)],1),e("el-tab-pane",{attrs:{label:"商品图片"}},[e("el-upload",{staticClass:"upload-demo",attrs:{action:t.actionsUrl+"upload","on-preview":t.handlePreview,headers:t.headersObj,"on-remove":t.handleRemove,"file-list":t.fileList,"on-success":t.successHandle,"list-type":"picture"}},[e("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),e("el-tab-pane",{attrs:{label:"商品内容"}},[e("quill-editor"),e("el-button",{staticStyle:{"margin-top":"24px"},attrs:{type:"primary"},on:{click:t.addGoods}},[t._v("添加商品")])],1)],1)],1)],1)},bt=[],gt=a(4237),ft={components:{quillEditor:gt.quillEditor},data(){return{actionsUrl:"http://43.138.15.137:7001/api/private/v1/",headersObj:{Authorization:localStorage.getItem("token")},checkedList:[],addGoodsRequest:{goods_name:"",goods_price:"",goods_number:"",goods_weight:"",goods_cat:"",attrs:[]},catList:[],defaultProps:{expandTrigger:"hover",label:"cat_name",value:"cat_id"},manyAttrs:[],onlyAttrs:[],active:0,tabPosition:"left",fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],catId:[]}},created(){this.$http.get("categories").then((t=>{let{data:e}=t.data;this.catList=e}))},methods:{handleChange(t){this.addGoodsRequest.goods_cat=t.join()},handleRemove(t,e){},handlePreview(t){},successHandle(t,e,a){},addGoods(){this.addGoodsRequest.attrs=[],this.manyAttrs.map(((t,e)=>{this.checkedList.map(((e,a)=>{if(-1!==t.attr_vals.indexOf(e)&&-1===this.addGoodsRequest.attrs.indexOf(t)){let e={attr_id:t.attr_id,attr_value:t.attr_vals};this.addGoodsRequest.attrs.push(e)}}))})),this.onlyAttrs.map(((t,e)=>{let a={attr_id:t.attr_id,attr_value:t.attr_vals};this.addGoodsRequest.attrs.push(a)})),this.$http.post("goods",this.addGoodsRequest).then((t=>{}))},selectedTab(t){let{index:e}=t;"1"===e&&this.$http.get(`categories/${this.addGoodsRequest.goods_cat[this.addGoodsRequest.goods_cat.length-1]}/attributes`,{params:{sel:"many"}}).then((t=>{let{data:e}=t.data;this.manyAttrs=e})),"2"===e&&this.$http.get(`categories/${this.addGoodsRequest.goods_cat[this.addGoodsRequest.goods_cat.length-1]}/attributes`,{params:{sel:"only"}}).then((t=>{let{data:e}=t.data;this.onlyAttrs=e}))}}},_t=ft,vt=(0,i.Z)(_t,ht,bt,!1,null,"6a104c1c",null),yt=vt.exports,wt=function(){var t=this,e=t._self._c;return e("div",[e("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),e("el-breadcrumb-item",[t._v("商品管理")]),e("el-breadcrumb-item",[t._v("分类参数")])],1),e("el-card",{staticClass:"box-card"},[e("el-alert",{attrs:{title:"注意：只允许为第三级分类设置相关参数！",type:"warning","show-icon":"",closable:!1}}),t._v(" 选择商品分类："+t._s(t.catIdArr)+" "),e("el-cascader",{staticStyle:{"margin-top":"20px"},attrs:{options:t.catList,props:t.defaultProps},on:{change:t.selectedCatId},model:{value:t.catIdArr,callback:function(e){t.catIdArr=e},expression:"catIdArr"}}),e("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"动态参数",name:"first"}},[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.paramsDialogFormVisible=!0}}},[t._v("添加参数")]),e("el-table",{staticStyle:{"margin-top":"12px",width:"100%"},attrs:{data:t.manyAttrs,border:""}},[e("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[e("el-form-item",{attrs:{label:""}},[t._l(a.row.attr_vals.split(" "),(function(a){return e("el-tag",{attrs:{closable:"","disable-transitions":!1},on:{close:function(e){return t.handleClose(t.tag)}}},[t._v(" "+t._s(a)+" ")])})),a.row.inputVisible?e("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(e){return t.handleInputConfirm(a.row)}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.target.blur()}},model:{value:a.row.inputValue,callback:function(e){t.$set(a.row,"inputValue",e)},expression:"props.row.inputValue"}}):e("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(e){return t.showInput(a.row)}}},[t._v("+ New Tag")])],2)],1)]}}])}),e("el-table-column",{attrs:{type:"index",label:""}}),e("el-table-column",{attrs:{label:"参数名称",prop:"attr_name"}}),e("el-table-column",{attrs:{label:"操作",prop:""},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"}},[t._v("修改")]),e("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"}},[t._v("删除")])]}}])})],1)],1),e("el-tab-pane",{attrs:{label:"静态属性",name:"second"}},[t._v("静态属性")])],1)],1),e("el-dialog",{attrs:{title:"添加参数",visible:t.paramsDialogFormVisible},on:{"update:visible":function(e){t.paramsDialogFormVisible=e}}},[e("el-form",[e("el-form-item",{attrs:{label:"动态参数","label-width":t.formLabelWidth}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.addManyAttr.attr_name,callback:function(e){t.$set(t.addManyAttr,"attr_name",e)},expression:"addManyAttr.attr_name"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.paramsDialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.addMany}},[t._v("确 定")])],1)],1)],1)},kt=[],xt={data(){return{addManyAttr:{attr_name:"",attr_sel:"many",attr_vals:"甜的 咸的 酸的"},formLabelWidth:"100px",paramsDialogFormVisible:!1,catIdArr:[],activeName:"first",catList:[],manyAttrs:[],defaultProps:{expandTrigger:"hover",label:"cat_name",value:"cat_id"},dynamicTags:["标签一","标签二","标签三"],inputVisible:!1,inputValue:""}},created(){this.$http.get("categories").then((t=>{let{data:e}=t.data;this.catList=e}))},methods:{handleClick(t,e){},handleClose(t){this.dynamicTags.splice(this.dynamicTags.indexOf(t),1)},showInput(t){t.inputVisible=!0,this.$nextTick((t=>{this.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm(t){this.addManyAttrs(t)},addManyAttrs(t){let{cat_id:e,attr_id:a,attr_name:s,attr_vals:r,inputValue:l}=t;this.$http.put(`categories/${e}/attributes/${a}`,{attr_name:s,attr_sel:"many",attr_vals:r+" "+l}).then((e=>{t.inputVisible=!1,t.inputValue="",this.getManyAttrs()}))},selectedCatId(t){t.length&&this.getManyAttrs()},getManyAttrs(){this.$http.get(`categories/${this.catIdArr[this.catIdArr.length-1]}/attributes`,{params:{sel:"many"}}).then((t=>{let{data:e}=t.data;e.map((t=>{t.inputVisible=!1,t.inputValue=""})),this.manyAttrs=e}))},addMany(){this.$http.post(`categories/${this.catIdArr[this.catIdArr.length-1]}/attributes`,this.addManyAttr).then((t=>{this.paramsDialogFormVisible=!1}))}}},Ct=xt,$t=(0,i.Z)(Ct,wt,kt,!1,null,"193438f3",null),At=$t.exports,St=function(){var t=this,e=t._self._c;return e("div",[e("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),e("el-breadcrumb-item",[t._v("商品管理")]),e("el-breadcrumb-item",[t._v("商品分类")])],1),e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[e("el-button",{attrs:{type:"primary"},on:{click:t.addCateHandle}},[t._v("添加分类")])],1)]),e("tree-table",{attrs:{"selection-type":!1,"expand-type":!1,"show-index":!0,data:t.cateList,columns:t.treeCol},scopedSlots:t._u([{key:"isok",fn:function(t){return[t.row.cat_deleted?e("i",{staticClass:"el-icon-circle-close red"}):e("i",{staticClass:"el-icon-circle-check green"})]}},{key:"order",fn:function(a){return[0===a.row.cat_level?e("el-tag",[t._v("一级")]):1===a.row.cat_level?e("el-tag",{attrs:{type:"success"}},[t._v("二级")]):e("el-tag",{attrs:{type:"warning"}},[t._v("三级")])]}},{key:"opt",fn:function(a){return[e("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"}},[t._v("修改")]),e("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"}},[t._v("删除")])]}}])})],1),e("el-dialog",{attrs:{title:"添加分类",visible:t.cateDialogFormVisible},on:{"update:visible":function(e){t.cateDialogFormVisible=e}}},[e("el-form",[e("el-form-item",{attrs:{label:"分类名称","label-width":t.formLabelWidth}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.addCateRequest.cat_name,callback:function(e){t.$set(t.addCateRequest,"cat_name",e)},expression:"addCateRequest.cat_name"}})],1),e("el-form-item",[t._v(" 选择商品分类："+t._s(t.selectedCatArr)+" "),e("el-cascader",{ref:"cascaderRef",attrs:{"popper-class":"custom-cascader",options:t.APICateList,props:t.defaultProps},on:{change:t.handleChange},model:{value:t.selectedCatArr,callback:function(e){t.selectedCatArr=e},expression:"selectedCatArr"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.cateDialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.addCate}},[t._v("确 定")])],1)],1)],1)},Rt=[],Dt={data(){return{APICateList:[],defaultProps:{expandTrigger:"hover",label:"cat_name",value:"cat_id",checkStrictly:!0},selectedCatArr:[],cateDialogFormVisible:!1,formLabelWidth:"100px",cateList:[],treeCol:[{label:"分类名称",prop:"cat_name"},{label:"是否有效",type:"template",template:"isok"},{label:"排序",type:"template",template:"order"},{label:"操作",type:"template",template:"opt"}],addCateRequest:{cat_pid:0,cat_name:"",cat_level:0}}},created(){this.$http.get("categories").then((t=>{this.cateList=t.data.data}))},methods:{addCateHandle(){this.cateDialogFormVisible=!0,this.$http.get("categories").then((t=>{this.APICateList=t.data.data}))},addCate(){this.addCateRequest.cat_level=this.selectedCatArr.length,0===this.selectedCatArr.length?this.addCateRequest.cat_pid=0:this.addCateRequest.cat_pid=this.selectedCatArr[this.selectedCatArr.length-1],this.$refs.cascaderRef.dropDownVisible=!1,this.$http.post("categories",this.addCateRequest).then((t=>{}))},handleChange(t){}}},Vt=Dt,Pt=(0,i.Z)(Vt,St,Rt,!1,null,null,null),Ft=Pt.exports,Lt=function(){var t=this,e=t._self._c;return e("div",[e("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),e("el-breadcrumb-item",[t._v("数据统计")]),e("el-breadcrumb-item",[t._v("数据报表")])],1),e("el-card",{staticClass:"box-card"},[e("div",{attrs:{id:"main"}})])],1)},Mt=[],qt=a(9372),Ot={mounted(){var t=qt.S1(document.getElementById("main"));this.$http.get("reports/type/1").then((e=>{let{data:a}=e.data;a.title={text:"数据统计",textStyle:{fontSize:20,color:"orange"}},a.legend={itemGap:50},a.tooltip={show:!0},a.yAxis={position:"right"},t.setOption(a)}))}},zt=Ot,It=(0,i.Z)(zt,Lt,Mt,!1,null,null,null),jt=It.exports;r["default"].use(v.Z);const Gt=new v.Z({mode:"history",routes:[{path:"/",component:$},{path:"/main",component:P,children:[{path:"/users",component:et},{path:"/roles",component:it},{path:"/goods",component:mt},{path:"/add",component:yt},{path:"/params",component:At},{path:"/categories",component:Ft},{path:"/reports",component:jt}]}]});Gt.beforeEach(((t,e,a)=>{if("/main"===t.path){let t=localStorage.getItem("token");t?a():a("/")}a()}));var Tt=Gt;Object.keys(s).forEach((t=>{r["default"].filter(t,s[t])})),r["default"].component("tree-table",h()),r["default"].use(p()),r["default"].config.productionTip=!1,new r["default"]({render:t=>t(c),router:Tt}).$mount("#app")}},e={};function a(s){var r=e[s];if(void 0!==r)return r.exports;var l=e[s]={id:s,loaded:!1,exports:{}};return t[s].call(l.exports,l,l.exports,a),l.loaded=!0,l.exports}a.m=t,function(){a.amdO={}}(),function(){var t=[];a.O=function(e,s,r,l){if(!s){var o=1/0;for(c=0;c<t.length;c++){s=t[c][0],r=t[c][1],l=t[c][2];for(var i=!0,n=0;n<s.length;n++)(!1&l||o>=l)&&Object.keys(a.O).every((function(t){return a.O[t](s[n])}))?s.splice(n--,1):(i=!1,l<o&&(o=l));if(i){t.splice(c--,1);var d=r();void 0!==d&&(e=d)}}return e}l=l||0;for(var c=t.length;c>0&&t[c-1][2]>l;c--)t[c]=t[c-1];t[c]=[s,r,l]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var r,l,o=s[0],i=s[1],n=s[2],d=0;if(o.some((function(e){return 0!==t[e]}))){for(r in i)a.o(i,r)&&(a.m[r]=i[r]);if(n)var c=n(a)}for(e&&e(s);d<o.length;d++)l=o[d],a.o(t,l)&&t[l]&&t[l][0](),t[l]=0;return a.O(c)},s=self["webpackChunk_2212_v2"]=self["webpackChunk_2212_v2"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(5610)}));s=a.O(s)})();
//# sourceMappingURL=app.2fefb354.js.map